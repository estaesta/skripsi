%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% BAB 3
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% studi literatur
% pembuatan model classifier
% implementasi inferenciing
% pengujian
% pembahasan

% TO DO: Parameter uji

\mychapter{3}{BAB 3 METODOLOGI}

% TO DO: alur penelitian
% studi literatur, pembuatan model, implementasi dan pengujian, penarikan kesimpulan
Penelitian ini dilakukan dengan beberapa tahapan, yaitu studi literatur, pembuatan model, implementasi, pengujian, dan penarikan kesimpulan. Gambar \ref{fig:alur-penelitian} menunjukkan alur penelitian yang digunakan pada penelitian ini.

\begin{figure}[tph]
	\centering
	\includegraphics[width=.45\linewidth]{./img/lstm-alur penelitian.drawio.pdf}
	\caption{Alur penelitian}
	\label{fig:alur-penelitian}
\end{figure}

\section{Studi Literatur}
\label{subsec: metodologi-studi-literatur}
% - Tujuan studi literatur
% - Metode studi literatur: 

Pada tahap ini, dilakukan studi literatur dengan cara melakukan \textit{review}
terhadap penelitian-penelitian terdahulu yang berkaitan dengan klasifikasi detak jantung menggunakan ECG
untuk mengetahui \textit{state-of-the-art} dari penelitian terkait.
Pada tahap ini juga dilakukan pencarian referensi terkait dengan klasifikasi detak jantung,
sinyal ECG, dan model LSTM yang akan digunakan pada penelitian ini untuk memperdalam pengetahuan penulis.
Sumber utama yang digunakan adalah jurnal ilmiah, konferensi, serta dokumentasi resmi.


% \section{Pengumpulan Data}
% \label{subsec: metodologi-pengumpulan-data}
%
% Data yang digunakan untuk melakukan pelatihan pada penelitian ini diperoleh dari dataset publik \textit{MIT‚ÄêBIH arrhythmia database} \parencite{moodyImpactMITBIHArrhythmia2001}.
% Dataset dapat diakses melalui tautan \url{https://physionet.org/content/mitdb/1.0.0/}.
% Dataset tersebut terdiri atas 48 data rekaman yang diambil dari 47 pasien.
% Setiap detak jantung pada dataset tersebut telah diberi label dan anotasi oleh para ahli.
% Pada dataset tersebut, data 102, 104, 107, dan 217 berisi data detak jantung yang sedang dipacu, sehingga tidak digunakan pada penelitian ini.
% Setiap rekaman memiliki durasi 30 menit dan terdiri dari dua kanal.
% Pada penelitian ini, hanya satu kanal yang digunakan, yaitu kanal \textit{Modified Lead II}.
% % Anotasi tersebut dapat dipetakan menjadi kelas sesuai dengan kelas rekomendasi AAMI, yaitu N, SVEB, VEB, F, dan Q \parencite{associationfortheadvancementofmedicalinstrumentationTestingReportingPerformance1998}. Pemetaan tersebut dapat dilihat pada Tabel \ref{tab:aami-label}.
%
% % Ini tidak dibahas detail
% % cukup penjelasan narasi singkat
% % TO DO: pindah ke bab 2
%
% % \begin{table}[h]
% % 	\caption{Kelas Rekomendasi AAMI dan Label pada MIT-BIH}
% % 	\begin{center}
% % 		\begin{tabular}{c @{\hspace{1cm}} c}
% % 			\hline
% % 			AAMI                              & MIT-BIH       \\
% % 			\hline
% % 			Normal (N)                        & N, L, R, e, j \\
% % 			Supraventricular Ectopic Beat (S) & A, a, J, S    \\
% % 			Ventricular Ectopic Beat (V)      & V, E          \\
% % 			Fusion (F)                        & F             \\
% % 			Unknown (Q)                       & /, f, Q       \\
% % 			\hline
% % 		\end{tabular}
% % 	\end{center}
% % 	\label{tab:aami-label}
% % \end{table}

\section{Pembuatan Model}
\label{subsec: metodologi-pembuatan-model}
Pada tahap ini, dilakukan pembuatan model yang akan digunakan untuk melakukan klasifikasi detak jantung.
Model dibuat untuk dapat mengklasifikasikan detak jantung menjadi 5 kelas, yaitu Normal (N), \textit{Supraventricular Ectopic Beat} (S), \textit{Ventricular Ectopic Beat} (V), \textit{Fusion} (F), dan \textit{Unknown} (Q).
Terdapat tiga jenis model yang akan digunakan pada penelitian ini, yaitu LSTM, Bi-LSTM, dan LSTM-FCN.
Pembuatan model meliputi \textit{preprocessing} data, ekstraksi fitur, pelatihan model, dan evaluasi model.

\section{Implementasi dan Pengujian Inferensi}
\label{subsec: metodologi-implementasi}

Untuk melakukan inferensi model, diperlukan implementasi model pada perangkat yang akan digunakan.
% Implementasi dilakukan dengan membuat aplikasi berbasis web yang dibuat dengan menggunakan menggunakan bahasa pemrograman Python dan \textit{framework} Flask.
Model diimplementasikan dalam bentuk aplikasi berbasis web.
% Aplikasi ini digunakan untuk melakukan inferensi pada data detak jantung yang diperoleh dari sensor ECG.
Aplikasi akan menerima data ECG dan akan mengembalikan keluaran berupa hasil klasifikasi detak jantung.
Nantinya, aplikasi ini akan di-\textit{deploy} pada perangkat Raspberry Pi 4 dan Intel NUC.

% ini pindah ke bab 5 (implementasi dan pengujian)
% Sebelum diimplementasikan, model dioptimasi terlebih dahulu agar dapat beroperasi secara efisien terutama pada perangkat dengan daya komputasi rendah seperti Raspberry Pi.
% Model dioptimasi dengan cara melakukan konversi ke dalam bentuk TensorFlow Lite (tflite).
% Model TensorFlow Lite memiliki ukuran yang lebih kecil dan membutuhkan lebih sedikit dependensi dibanding dengan model TensorFlow.
% Pada proses optimasi, juga dilakukan kuantisasi yang dapat mengurangi penggunaan memori dan mempercepat komputasi
% sehingga cocok untuk perangkat dengan spesifikasi rendah seperti Raspberry Pi.

% flowchart aplikasi

% \section{Pengujian}
% \label{subsec: metodologi-pengujian}

% Pengujian dilakukan pada perangkat Raspberry Pi 3B. Perangkat ini memiliki prosesor ARMv8 quad-core 1,2GHz dan RAM 1GB LPDDR2. Konektivitas perangkat ini didukung dengan 2.4Ghz WiFi serta \textit{ethernet} dengan kecepatan maksimum 100Mbps.
% pindah ke landasan teori

Pada tahap pengujian, dilakukan pengujian inferensi model pada perangkat Raspberry Pi 4 dan Intel NUC.
Tujuan dari pengujian ini adalah untuk mengevaluasi performa inferensi dari model yang telah dibuat pada beberapa perangkat.
Pengujian dilakukan menggunakan data uji berupa data ECG yang diperoleh dari sensor ECG Polar H10.
Metrik pengujian yang digunakan adalah waktu prediksi dan penggunaan memori saat melakukan inferensi pada perangkat.
Data detak jantung yang digunakan dalam pengujian memiliki durasi sepanjang 10 detik, 1 menit, dan 10 menit.
Pengujian dilakukan menggunakan tiga model yang telah dilatih sebelumnya, yaitu LSTM, Bi-LSTM, dan LSTM-FCN.
Setiap pengujian diulang sebanyak 5 kali untuk setiap jenis model, dan hasil yang diperoleh kemudian dijadikan nilai rata-rata sebagai hasil akhir.

\section{Penarikan Kesimpulan}
\label{subsec: metodologi-penarikan-kesimpulan}
Penarikan kesimpulan dilakukan setelah melakukan seluruh tahapan penelitian mulai, dari studi literatur hingga pengujian.
Kesimpulan tersebut didasarkan pada hasil pengujian dan analisis yang telah dilakukan.
Kesimpulan yang diperoleh diharapkan dapat menjawab rumusan masalah yang telah diajukan dalam penelitian ini.

% \section{Pembahasan}
% \label{subsec: metodologi-pembahasan}
%
% Pada tahap ini, hasil pengujian akan dianalisis secara mendalam.
% Hasil pengujian model akan dibandingkan untuk mencari model dengan performa terbaik.
% Selain itu, hasil pengujian juga akan dibandingkan dengan hasil penelitian-penelitian sebelumnya.
% % Hasil dari pengujian ini akan menjadi subjek utama pembahasan.

% \section{Jadwal penelitian}
% \label{subsec:label}
%
% \begin{figure}[tph]
% %   \centering
% %   \includegraphics[width=.7\linewidth]{img/jadwal.png}
% %   \caption{Jadwal Penelitian}
% %   \label{fig:jadwal-penelitian}
% \end{figure}
